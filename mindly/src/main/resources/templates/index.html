<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Mindly</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'"
        href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" />
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>

<body class="bg-slate-50 min-h-screen flex flex-col" style='font-family: Inter, "Noto Sans", sans-serif;'>
    <div th:replace="~{fragmentos/navbar :: navbar}"></div>
    <div class="flex flex-row justify-center items-start min-h-[80vh] px-10 py-8 gap-10 flex-1">
        <div class="bg-white rounded-lg shadow-md p-6 w-[380px] min-h-[400px]">
            <h2 class="text-xl font-bold text-[#0d141c] mb-4">Consultas do dia</h2>
            <ul id="listaConsultasHoje">
                <li th:if="${consultasHoje == null or consultasHoje.empty}" class="text-gray-500">
                    Nenhuma consulta marcada para hoje.
                </li>
                <li th:each="consulta : ${consultasHoje}" class="mb-3 border-b pb-2 last:border-b-0 last:pb-0">
                    <div class="flex flex-col">
                        <span class="font-semibold text-[#3d99f5]" th:text="${consulta.paciente.nome}">Paciente</span>
                        <span class="text-sm text-[#49739c]"
                            th:text="${#temporals.format(consulta.dataConsulta, 'HH:mm')}">Hora</span>
                        <span class="text-xs text-[#49739c]" th:text="${consulta.medico}">Médico</span>
                    </div>
                </li>
            </ul>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 w-[420px] min-h-[400px] flex flex-col items-center">
            <h2 class="text-xl font-bold text-[#0d141c] mb-4">Calendário</h2>
            <input id="dataSelecionada" type="date" class="border border-[#cedbe8] rounded-lg px-3 py-2 text-base mb-6"
                th:value="${hoje}" onchange="filtrarPorData()" style="min-width: 220px;">
            <div class="w-full">
                <h3 class="text-lg font-semibold text-[#0d141c] mb-2">Consultas do dia selecionado</h3>
                <ul id="listaConsultasData">
                    <li th:if="${consultasData == null or consultasData.empty}" class="text-gray-500">
                        Nenhuma consulta para esta data.
                    </li>
                    <li th:each="consulta : ${consultasData}" class="mb-3 border-b pb-2 last:border-b-0 last:pb-0">
                        <div class="flex flex-col">
                            <span class="font-semibold text-[#3d99f5]"
                                th:text="${consulta.paciente.nome}">Paciente</span>
                            <span class="text-sm text-[#49739c]"
                                th:text="${#temporals.format(consulta.dataConsulta, 'HH:mm')}">Hora</span>
                            <span class="text-xs text-[#49739c]" th:text="${consulta.medico}">Médico</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div th:replace="~{fragmentos/footer :: footer}"></div>
    <script>
        function filtrarPorData() {
            const data = document.getElementById('dataSelecionada').value;
            window.location.href = '/?data=' + data;
        }
    </script>
</body>

</html>